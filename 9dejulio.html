
// Icons from lucide-react (example imports, actual usage will be inline or specific)
const MenuIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-menu">
    <line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" />
  </svg>
);import React, { useState, useEffect, useRef } from 'react';

const ChevronDownIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-chevron-down">
    <path d="m6 9 6 6 6-6" />
  </svg>
);
const UserIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-user">
    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" />
  </svg>
);
const HistoryIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-book-open">
    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
  </svg>
);
const MessageCircleIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-message-circle">
    <path d="M7.9 20A9.1 9.1 0 0 1 4 15.1V14a5 5 0 0 0-5-5V7a5 5 0 0 0 5-5h6.1A9.1 9.1 0 0 1 20 7.9V10a5 5 0 0 0 5 5v1.1a9.1 9.1 0 0 1-4.9 4.9L12 22l-4.1-2Z" />
  </svg>
);
const PaletteIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-palette">
    <circle cx="13.5" cy="6.5" r=".5" fill="currentColor" /><circle cx="17.5" cy="10.5" r=".5" fill="currentColor" /><circle cx="8.5" cy="7.5" r=".5" fill="currentColor" /><circle cx="6.5" cy="12.5" r=".5" fill="currentColor" /><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.648 0-.453-.105-.86-.299-1.192-.124-.176-.2-.337-.2-.49 0-.25.16-.425.32-.562A8.51 8.51 0 0 0 18 10c0-4.418-3.582-8-8-8Z" />
  </svg>
);
const GamepadIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-gamepad">
    <path d="M6 12H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2m0 6v2a2 2 0 0 0 2 2h2m0-6H12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-2m0 6v2a2 2 0 0 0-2 2H8m6-6h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2m0-6v2a2 2 0 0 0-2 2v2m6-6v2a2 2 0 0 0 2 2h2m0-6v2a2 2 0 0 0-2 2H18" />
  </svg>
);
const SearchIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-search">
    <circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" />
  </svg>
);
const CrossIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-x">
    <path d="M18 6 6 18" /><path d="m6 6 12 12" />
  </svg>
);
const HelpCircleIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-help-circle">
    <circle cx="12" cy="12" r="10" /><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" /><path d="M12 17h.01" />
  </svg>
);
const RefreshCwIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-refresh-cw">
    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" /><path d="M21 3v5h-5" /><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" /><path d="M3 21v-5h5" />
  </svg>
);
// Helper function to shuffle an array
const shuffleArray = (array) => {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
};
// --- Components ---

const Header = ({ onNavigate, currentSection }) => {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const handleNavigate = (section) => {
    onNavigate(section);
    setMobileMenuOpen(false); // Close mobile menu on navigation
  };

  return (
    <header className="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-4 shadow-lg rounded-b-xl mb-6">
      <div className="container mx-auto flex justify-between items-center flex-wrap">
        <h1 className="text-4xl font-extrabold text-yellow-300 drop-shadow-md cursor-pointer transition-all duration-300 hover:scale-105" onClick={() => handleNavigate('home')}>
          9 de Julio: ¬°La Data Completa!
        </h1>

        {/* Mobile Menu Button */}
        <button className="md:hidden text-white focus:outline-none" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
          <MenuIcon />
        </button>

        {/* Desktop Navigation - Simplified or removed as per new button placement */}
        <nav className="hidden md:flex space-x-6 items-center">
          {/* These buttons are kept if they are top-level and not part of the new home screen buttons */}
          <button
            className={`flex items-center px-6 py-3 rounded-lg text-lg transition duration-300 transform hover:scale-105 ${currentSection === 'contexto' ? 'bg-blue-600' : 'hover:bg-blue-600'}`}
            onClick={() => handleNavigate('contexto')}
          >
            <HistoryIcon className="mr-2" />
            Contexto Hist√≥rico
          </button>

          <button
            className={`flex items-center px-6 py-3 rounded-lg text-lg transition duration-300 transform hover:scale-105 ${currentSection === 'whatsapp' ? 'bg-blue-600' : 'hover:bg-blue-600'}`}
            onClick={() => handleNavigate('whatsapp')}
          >
            <MessageCircleIcon className="mr-2" />
            WhatsApp Pr√≥ceres
          </button>
        </nav>

        {/* Mobile Navigation - Simplified or removed as per new button placement */}
        {mobileMenuOpen && (
          <nav className="md:hidden flex flex-col space-y-2 mt-4 w-full bg-blue-700 rounded-md p-4 shadow-inner animate-fade-in">
            <button className="flex items-center px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-200" onClick={() => handleNavigate('contexto')}>
              <HistoryIcon className="mr-2" /> Contexto Hist√≥rico
            </button>
            <button className="flex items-center px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-200" onClick={() => handleNavigate('whatsapp')}>
              <MessageCircleIcon className="mr-2" /> WhatsApp Pr√≥ceres
            </button>
            {/* The rest of the menu items will be handled by the new main buttons on the home screen */}
          </nav>
        )}
      </div>
    </header>
  );
};

const HistoriaContexto = () => (
  <section className="p-8 bg-gray-100 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
    <h2 className="text-4xl font-extrabold text-blue-800 mb-6 text-center">El Gran Quilombo: Antes del WhatsApp Pr√≥cer</h2>
    <div className="text-gray-700 leading-relaxed text-lg">
      <p className="mb-4">
        Che, pibes y pibas, ¬°atenti a la jugada! Imaginate que estamos en 1810, y por ac√°, en estas tierras del sur de Am√©rica, la gente ya estaba medio podrida de que todo lo decidiera un rey que viv√≠a re lejos, all√° en Espa√±a. No es que el tipo fuera malo, pero ¬øviste cuando tus viejos te quieren manejar la vida y vos ya ten√©s tus propias ideas? Bueno, algo as√≠. La cosa es que el Virreinato del R√≠o de la Plata era una de las colonias m√°s importantes para la Corona Espa√±ola, y ac√° se viv√≠a bajo sus reglas, sus impuestos y sus decisiones, ¬°sin que nadie de ac√° pudiera decir ni mu!
      </p>
      <p className="mb-4">
        Con la Revoluci√≥n de Mayo de 1810, le dijimos "chau" al virrey y armamos nuestra propia Junta de Gobierno. ¬°Un golazo! Fue como tirar el primer grito de "basta". Pero ojo, que una cosa es sacarse de encima al que manda y otra muy distinta es decir "somos libres" posta. En ese momento, aunque el rey espa√±ol Fernando VII estaba metido en un bardo con Napole√≥n Bonaparte (¬°ese s√≠ que era un quilombero a escala europea!), la idea de la independencia total todav√≠a era un caramelito que algunos pensaban con miedo y otros, ni a palos. Hab√≠a mucho tira y afloje sobre si seguir siendo parte de Espa√±a con alguna autonom√≠a, o cortar lazos para siempre.
      </p>
      <p className="mb-4">
        Pasaron unos a√±os, y la cosa se puso intensa. No hab√≠a tregua. Hab√≠a guerras por todos lados, los espa√±oles no se daban por vencidos y mandaban tropas para recuperar el control. A eso se sumaba que ac√° adentro no todos estaban de acuerdo en el "c√≥mo" y el "cu√°ndo" de la independencia. Hab√≠a gente que quer√≠a una monarqu√≠a (¬°mamita querida, volver a tener un rey!), otros una rep√∫blica bien democr√°tica, y otros que solo quer√≠an seguir haciendo sus negocios sin que nadie los jodiera. ¬°Un l√≠o b√°rbaro de facciones y proyectos de pa√≠s! La estabilidad era un chiste.
      </p>
      <p className="mb-4">
        Mientras tanto, hab√≠a pr√≥ceres como San Mart√≠n, un visionario con todas las letras, que desde Cuyo ya estaba armando un ej√©rcito para cruzar la Cordillera y libertar lo que quedaba de Sudam√©rica. El tipo ten√≠a claro que si no √©ramos independientes, √≠bamos a seguir siendo un cacho de tierra manejado desde afuera, y su plan era mucho m√°s ambicioso que solo liberar estas tierras. Y Belgrano, otro crack, tambi√©n se la pasaba laburando a mil, con la bandera y todo, peleando en el Norte y dejando el alma en cada batalla, a pesar de las derrotas y las dificultades.
      </p>
      <p className="mb-4">
        La gente, la del pueblo, los gauchos, los criollos, los ind√≠genas, estaban cansados de la incertidumbre y de las guerras que no terminaban. Quer√≠an saber para d√≥nde rumbeaba el barco de una vez por todas. ¬ø√âramos espa√±oles? ¬ø√âramos algo nuevo? ¬øQu√© futuro nos esperaba? La presi√≥n era enorme y el desgaste, palpable en cada rinc√≥n del territorio.
      </p>
      <p className="mb-6">
        As√≠ las cosas, en 1816, decidieron que era hora de meterle pata y jugarse el todo por el todo. Convocaron a un congreso en San Miguel de Tucum√°n, una provincia m√°s tranquila y m√°s al norte que Buenos Aires, buscando un lugar m√°s federal para las discusiones y decisiones. La idea era declarar la independencia y ponerle punto final a la dependencia de Espa√±a y de cualquier otra potencia que quisiera pasarse de viva.
      </p>
      <p className="mb-6">
        Imagin√°te el clima: discusiones acaloradas, debates profundos sobre el destino de la patria, gente viajando kil√≥metros y kil√≥metros para llegar a Tucum√°n, con caminos de mierda, peligros por todos lados y comunicaciones lent√≠simas. No era como hoy que mand√°s un audio de WhatsApp o una videollamada y listo. ¬°Era un compromiso serio y un esfuerzo tremendo para todos! Y en ese contexto, con la presi√≥n al m√°ximo, llega el 9 de julio de 1816, el d√≠a clave. ¬øQu√© pasar√°? ¬øSe pondr√°n de acuerdo? ¬°Segu√≠ leyendo para enterarte c√≥mo lo vivieron en su grupo de WhatsApp y si lograron el gran objetivo!
      </p>

      <div className="flex justify-center mt-8">
        <img
          src="https://placehold.co/400x250/007bff/ffffff?text=Congreso+de+Tucum√°n"
          alt="Congreso de Tucum√°n"
          className="rounded-lg shadow-md border-2 border-blue-300 transition-transform duration-300 hover:scale-105"
          onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/400x250/007bff/ffffff?text=Imagen+no+disponible"; }}
        />
      </div>
      <p className="text-center text-sm text-gray-500 mt-2">
        <span className="font-semibold italic">Ilustraci√≥n:</span> Una representaci√≥n del hist√≥rico Congreso de Tucum√°n, donde se tom√≥ la decisi√≥n m√°s importante.
      </p>
    </div>
  </section>
);

const WhatsAppChat = () => {
  const messages = [
    { id: 1, sender: 'Belgrano (General)', time: '08:30', text: 'Che, alguien m√°s con el celu sin se√±al? Desde Salta la conexi√≥n es un desastre. üò© Los realistas nos cortan hasta el wifi.' },
    { id: 2, sender: 'San Mart√≠n (Libertador)', time: '08:35', text: 'Ac√° en Cuyo, la misma. Con la Cordillera de por medio, el 4G es un sue√±o. ¬øAlguna novedad del Congreso, Belgrano? La ansiedad me mata.' },
    { id: 3, sender: 'Belgrano (General)', time: '08:40', text: 'Me lleg√≥ un palomo con un mensaje cifrado medio confuso. Parece que el clima est√° heavy. Hay gente que todav√≠a duda si declarar la independencia posta. ¬°No entienden la urgencia!' },
    { id: 4, sender: 'G√ºemes (Gaucho)', time: '08:42', text: '¬°C√≥mo que dudan?! Ac√° en Salta nos bancamos los malones realistas solos, d√≠a y noche. Si no declaramos la independencia ahora, ¬øcu√°ndo carajo? ¬°Mis gauchos est√°n que arden!' },
    { id: 5, sender: 'Rivadavia (Pol√≠tico)', time: '08:45', text: 'Calma, Mart√≠n. Hay que ser prudentes. ¬øY si los europeos nos caen encima si nos declaramos totalmente libres? El reconocimiento internacional es clave para nuestra estabilidad futura. No es solo un arrebato.' },
    { id: 6, sender: 'San Mart√≠n (Libertador)', time: '08:48', text: 'Con respeto, Bernardino, pero ¬øde qu√© reconocimiento hablamos si somos una colonia sometida? La libertad se conquista con coraje, no se pide permiso con un fax. ¬°Hay que meterle huevos al asunto!' },
    { id: 7, sender: 'Castelli (Orador)', time: '08:50', text: 'Jos√© tiene raz√≥n. El pueblo ya est√° cansado de la monarqu√≠a y de vivir en la incertidumbre. La chispa de Mayo no puede apagarse por dudas. ¬°Es ahora o nunca, la historia nos mira!' },
    { id: 8, sender: 'Pueyrred√≥n (Director Supremo)', time: '08:55', text: 'Desde Tucum√°n: Chicos, el ambiente est√° tenso en la Casa. Hoy es el d√≠a clave. Estamos debatiendo la redacci√≥n final de la Declaraci√≥n. La frase "de la Independencia de Espa√±a y sus sucesores" genera debate.' },
    { id: 9, sender: 'Belgrano (General)', time: '08:57', text: '¬°Obvio que s√≠! ¬øO queremos cambiar un amo por otro? ¬°Independencia total o nada! Que quede bien claro para todos los que quieran venir a joder.' },
    { id: 10, sender: 'G√ºemes (Gaucho)', time: '08:58', text: '¬°Bien ah√≠, Manuel! Ac√° los gauchos estamos listos para lo que sea. ¬°Viva la Patria libre, carajo! ¬°Que se enteren en Madrid!' },
    { id: 11, sender: 'San Mart√≠n (Libertador)', time: '09:00', text: 'Me llega una paloma con la √∫ltima data fresquita. Parece que el diputado Medrano propuso agregar "y de toda otra dominaci√≥n extranjera". ¬°Un capo! Esa frase cierra el c√≠rculo.' },
    { id: 12, sender: 'Rivadavia (Pol√≠tico)', time: '09:02', text: 'Hmm, interesante. Esa adici√≥n podr√≠a darnos m√°s margen de acci√≥n, si al final hay que negociar con alguien m√°s en el futuro... me gusta la ambig√ºedad estrat√©gica.' },
    { id: 13, sender: 'Pueyrred√≥n (Director Supremo)', time: '09:05', text: '¬°SE APROB√ì, GENTE! ¬°Declaraci√≥n de Independencia de las Provincias Unidas en Sud Am√©rica! ¬°Con la adici√≥n de Medrano! ¬°Un√°nime!' },
    { id: 14, sender: 'Belgrano (General)', time: '09:06', text: '¬°¬°¬°VAMOOOOS!!! üá¶üá∑ Esto es hist√≥rico, mis camaradas. L√°grimas de emoci√≥n en Salta. ¬°A celebrar con mate y empanadas!' },
    { id: 15, sender: 'San Mart√≠n (Libertador)', time: '09:07', text: '¬°Misi√≥n cumplida en el Congreso! Ahora nos toca a nosotros, Manuel. Preparando el cruce de los Andes con todo el equipo. ¬°La libertad espera m√°s all√° de las monta√±as!' },
    { id: 16, sender: 'G√ºemes (Gaucho)', time: '09:08', text: '¬°Cont√° con nosotros, Jos√©! Ac√° en el Norte somos el escudo de la Patria, no pasa nadie. ¬°Aguante la Independencia y la libertad del paisano!' },
    { id: 17, sender: 'Castelli (Orador)', time: '09:10', text: '¬°La voz del pueblo se hizo escuchar, fuerte y claro! Que resuene en cada rinc√≥n de Am√©rica, desde el sur hasta el norte. ¬°Viva la Patria libre y soberana! ¬°La dignidad es nuestra!' },
    { id: 18, sender: 'Rivadavia (Pol√≠tico)', time: '09:12', text: 'Un paso importante, sin dudas. Ahora, a construir el pa√≠s sobre bases s√≥lidas. Esto reci√©n empieza, y el camino ser√° largo y complejo. (Emoji pensativo) ¬°Mucho por hacer!' },
    { id: 19, sender: 'San Mart√≠n (Libertador)', time: '09:15', text: '¬°Totalmente, Bernardino! La Declaraci√≥n es el primer paso. El desaf√≠o es consolidar esta libertad. ¬°No aflojarle nunca!' },
    { id: 20, sender: 'Belgrano (General)', time: '09:18', text: 'Conf√≠o en que esta Patria que nace ser√° grande. ¬°Nos vemos en los campos de batalla, si es necesario, defendiendo esta decisi√≥n hist√≥rica!' },
  ];
  const chatEndRef = useRef(null);

  useEffect(() => {
    // Scroll to the bottom of the chat when messages update
    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);
  const getSenderColor = (sender) => {
    switch (sender.split(' ')[0]) { // Use first word for consistent color
      case 'Belgrano': return 'bg-blue-200';
      case 'San': return 'bg-green-200';
      case 'G√ºemes': return 'bg-yellow-200';
      case 'Rivadavia': return 'bg-purple-200';
      case 'Castelli': return 'bg-red-200';
      case 'Pueyrred√≥n': return 'bg-indigo-200';
      default: return 'bg-gray-200';
    }
  };

  const getSenderAlignment = (sender) => {
    // Arbitrarily align some to the right to simulate "self" messages
    if (['San Mart√≠n (Libertador)', 'G√ºemes (Gaucho)'].includes(sender)) {
      return 'justify-end';
    }
    return 'justify-start';
  };

  const getSenderImage = (sender) => {
    switch (sender.split(' ')[0]) {
      case 'Belgrano': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Manuel_Belgrano_by_Fran√ßois_Casimir_Carbonnier.jpg/80px-Manuel_Belgrano_by_Fran√ßois_Casimir_Carbonnier.jpg';
      case 'San': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Jose_de_San_Martin.jpg/80px-Jose_de_San_Martin.jpg';
      case 'G√ºemes': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Mart%C3%ADn_Miguel_de_G%C3%BCemes_-_Jos%C3%A9_Antonio_Argerich.jpg/80px-Mart%C3%ADn_Miguel_de_G%C3%BCemes_-_Jos%C3%A9_Antonio_Argerich.jpg';
      case 'Rivadavia': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Bernardino_Rivadavia_by_Jos%C3%A9_Gil_de_Castro.jpg/80px-Bernardino_Rivadavia_by_Jos%C3%A9_Gil_de_Castro.jpg';
      case 'Castelli': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Juan_Jos%C3%A9_Castelli.JPG/80px-Juan_Jos%C3%A9_Castelli.JPG';
      case 'Pueyrred√≥n': return 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Juan_Mart%C3%ADn_de_Pueyrred%C3%B3n.jpg/80px-Juan_Mart%C3%ADn_de_Pueyrred%C3%B3n.jpg';
      default: return 'https://placehold.co/40x40/D3D3D3/000000?text=PR'; // Placeholder for others
    }
  };
  return (
    <section className="p-8 bg-gradient-to-br from-teal-50 to-green-100 rounded-xl shadow-lg mb-8 mx-auto max-w-2xl animate-fade-in">
      <h2 className="text-4xl font-extrabold text-teal-800 mb-6 text-center">¬°El Grupo de WhatsApp del 9 de Julio!</h2>
      <p className="text-gray-700 text-lg mb-6 text-center">
        Imagin√°te a los pr√≥ceres conectados, discutiendo los √∫ltimos detalles de la Independencia. ¬°As√≠ fue la previa del grito sagrado! ¬°No te pierdas esta charla que cambi√≥ la historia!
      </p>

      <div className="bg-white p-6 rounded-3xl shadow-xl border border-gray-200 overflow-y-auto h-[600px] flex flex-col">
        {messages.map((msg) => (
          <div key={msg.id} className={`flex ${getSenderAlignment(msg.sender)} mb-4`}>
            {getSenderAlignment(msg.sender) === 'justify-start' && (
              <img
                src={getSenderImage(msg.sender)}
                alt={`${msg.sender} profile`}
                className="w-10 h-10 rounded-full mr-3 self-end border-2 border-gray-300 object-cover"
                onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/40x40/D3D3D3/000000?text=Error"; }}
              />
            )}
            <div className={`flex flex-col max-w-[75%] p-4 rounded-xl shadow-md ${getSenderColor(msg.sender)} transform transition-all duration-300 hover:scale-[1.02]`}>
              <div className="font-bold text-gray-800 text-sm">{msg.sender} <span className="text-gray-500 text-xs ml-2">{msg.time}</span></div>
              <p className="text-gray-900 text-base">{msg.text}</p>
            </div>
            {getSenderAlignment(msg.sender) === 'justify-end' && (
              <img
                src={getSenderImage(msg.sender)}
                alt={`${msg.sender} profile`}
                className="w-10 h-10 rounded-full ml-3 self-end border-2 border-gray-300 object-cover"
                onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/40x40/D3D3D3/000000?text=Error"; }}
              />
            )}
          </div>
        ))}
        <div ref={chatEndRef} />
      </div>
    </section>
  );
};

const ElementosVisuales = () => (
  <section className="p-8 bg-indigo-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
    <h2 className="text-4xl font-extrabold text-indigo-800 mb-6 text-center">¬°Mir√° estos Cuadros y Gr√°ficos!</h2>
    <p className="text-gray-700 text-lg mb-6 text-center">
      Un toque visual para entender mejor la √©poca. ¬°Im√°genes que te cuentan la historia de otra manera!
    </p>

    <div className="flex flex-col space-y-8">
      {/* Gr√°fico 1: Representaci√≥n de Delegados por Provincia */}
      <div className="bg-white p-6 rounded-xl shadow-md mb-8 border border-indigo-200 transition-transform duration-300 hover:scale-[1.01]">
        <h3 className="text-2xl font-bold text-indigo-700 mb-4 flex items-center">
          <UserIcon className="mr-2 text-blue-500" /> Delegados por Provincia (Ilustrativo)
        </h3>
        <p className="text-gray-600 mb-4">
          Este gr√°fico muestra una distribuci√≥n aproximada de la participaci√≥n de las provincias en el Congreso de Tucum√°n. ¬°Ojo, los n√∫meros son a modo ilustrativo para que entiendas la idea, no son exactos a la delegaci√≥n hist√≥rica completa! Refleja la diversidad de las Provincias Unidas.
        </p>
        <div className="w-full h-64 bg-gray-50 flex items-end justify-around p-4 rounded-md">
          {/* Simple Bar Chart */}
          <div className="flex flex-col items-center">
            <div className="bg-blue-500 w-10 h-4/5 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">Buenos Aires (8)</span>
          </div>
          <div className="flex flex-col items-center">
            <div className="bg-green-500 w-10 h-3/5 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">C√≥rdoba (4)</span>
          </div>
          <div className="flex flex-col items-center">
            <div className="bg-red-500 w-10 h-2/5 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">Salta (3)</span>
          </div>
          <div className="flex flex-col items-center">
            <div className="bg-yellow-500 w-10 h-1/2 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">Jujuy (2)</span>
          </div>
          <div className="flex flex-col items-center">
            <div className="bg-purple-500 w-10 h-1/3 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">Tucum√°n (3)</span>
          </div>
          <div className="flex flex-col items-center">
            <div className="bg-pink-500 w-10 h-1/4 rounded-t-lg transform transition-transform duration-300 hover:scale-y-110"></div>
            <span className="text-sm mt-2 text-gray-700">Mendoza (1)</span>
          </div>
        </div>
      </div>

      {/* Cuadro 2: Bando Realista vs Independentista */}
      <div className="bg-white p-6 rounded-xl shadow-md mb-8 border border-red-200 transition-transform duration-300 hover:scale-[1.01]">
        <h3 className="text-2xl font-bold text-red-700 mb-4 flex items-center">
          <HistoryIcon className="mr-2 text-red-500" /> ¬°El Gran Conflicto: Bandos!
        </h3>
        <p className="text-gray-600 mb-4 text-center">
          Para entender por qu√© fue tan clave el 9 de julio, ten√≠as que saber qui√©n era qui√©n en este quilombo. ¬°Ac√° te armamos un "diagrama" de los bandos!
        </p>
        <div className="flex flex-col items-center justify-center space-y-6">
          <div className="w-full max-w-md bg-gradient-to-r from-red-200 to-red-300 p-4 rounded-lg shadow-md text-center transform transition-transform duration-300 hover:scale-105">
            <h4 className="font-bold text-red-800 text-xl mb-2">Realistas / Conservadores</h4>
            <p className="text-red-700 text-sm">Quer√≠an seguir bajo el dominio espa√±ol o una monarqu√≠a con rey europeo. Ten√≠an miedo al caos y a perder privilegios. Muchos eran comerciantes ligados a Espa√±a o funcionarios de la corona. Su influencia se sent√≠a en algunas regiones y con las tropas espa√±olas.</p>
          </div>
          <div className="text-5xl text-gray-700 animate-bounce-horizontal">‚ÜîÔ∏è</div> {/* Arrow for conflict with subtle animation */}
          <div className="w-full max-w-md bg-gradient-to-r from-green-200 to-green-300 p-4 rounded-lg shadow-md text-center transform transition-transform duration-300 hover:scale-105">
            <h4 className="font-bold text-green-800 text-xl mb-2">Independentistas / Revolucionarios</h4>
            <p className="text-green-700 text-sm">Buscaban la independencia total de Espa√±a y la formaci√≥n de un nuevo Estado. Dentro de este grupo hab√≠a distintas visiones: republicanos, mon√°rquicos (pero con un rey local), unitarios, federales. Eran el motor del cambio.</p>
          </div>
        </div>
        <p className="text-center text-sm text-gray-500 mt-4">
          <span className="font-semibold italic">Diagrama:</span> Las principales fuerzas pol√≠ticas y militares en conflicto antes de la Independencia.
        </p>
      </div>

      {/* Vi√±etas / Iconos */}
      <div className="bg-white p-6 rounded-xl shadow-md mb-8 border border-green-200 transition-transform duration-300 hover:scale-[1.01]">
        <h3 className="text-2xl font-bold text-green-700 mb-4 text-center flex items-center justify-center">
          <HelpCircleIcon className="mr-2 text-green-500" /> ¬øPor qu√© se declar√≥ la Independencia?
        </h3>
        <p className="text-gray-600 mb-6 text-center">
          Algunos puntos clave que llevaron a la decisi√≥n hist√≥rica del 9 de julio.
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">üëë</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">Crisis en Espa√±a</h4>
            <p className="text-sm text-gray-700">Napole√≥n invadi√≥ Espa√±a y el rey Fernando VII estaba preso. ¬°Un l√≠o que debilit√≥ el poder espa√±ol!</p>
          </div>
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">üó£Ô∏è</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">Ideas Revolucionarias</h4>
            <p className="text-sm text-gray-700">La Revoluci√≥n Francesa y la Independencia de EE.UU. inspiraron a muchos con ideas de libertad.</p>
          </div>
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">‚úä</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">Voluntad Popular</h4>
            <p className="text-sm text-gray-700">El hartazgo de la gente y el deseo de libertad.</p>
          </div>
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">‚úâÔ∏è</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">Presi√≥n Popular y Militar</h4>
            <p className="text-sm text-gray-700">La gente y los l√≠deres militares, como San Mart√≠n y Belgrano, clamaban por la declaraci√≥n formal de independencia para dar legitimidad a la lucha.</p>
          </div>
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">ü§ù</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">1816: Congreso en Tucum√°n</h4>
            <p className="text-sm text-gray-700">Diputados de las Provincias Unidas se juntaron a debatir y decidir el futuro de la Patria en la hist√≥rica Casa de Tucum√°n.</p>
          </div>
          <div className="flex flex-col items-center text-center p-4 bg-gray-50 rounded-lg shadow-sm transition-transform duration-300 hover:scale-105">
            <div className="text-5xl mb-3">üìù</div>
            <h4 className="font-semibold text-lg text-gray-800 mb-2">9 de Julio de 1816</h4>
            <p className="text-sm text-gray-700">¬°Se firma la Declaraci√≥n de Independencia de las Provincias Unidas en Sud Am√©rica! ¬°Un momento que marc√≥ el destino!</p>
          </div>
        </div>
      </div>

      {/* Galer√≠a de Im√°genes */}
      <div className="bg-white p-6 rounded-xl shadow-md mb-8 border border-blue-200 transition-transform duration-300 hover:scale-[1.01]">
        <h3 className="text-2xl font-bold text-blue-700 mb-4 text-center flex items-center justify-center">
          <PaletteIcon className="mr-2 text-blue-500" /> Galer√≠a Hist√≥rica
        </h3>
        <p className="text-gray-600 mb-6 text-center">
          Im√°genes que nos recuerdan momentos clave de nuestra independencia.
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div className="flex flex-col items-center">
            <img src="https://placehold.co/300x200/007bff/ffffff?text=Cruce+de+los+Andes" alt="Cruce de los Andes" className="rounded-lg shadow-md border-2 border-blue-300 w-full transition-transform duration-300 hover:scale-105" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/300x200/007bff/ffffff?text=Imagen+no+disponible"; }} />
            <p className="text-center text-sm text-gray-500 mt-2">
              <span className="font-semibold italic">Dibujo:</span> El hist√≥rico cruce de los Andes liderado por San Mart√≠n.
            </p>
          </div>
          <div className="flex flex-col items-center">
            <img src="https://placehold.co/300x200/ff7f00/ffffff?text=Gauchos+de+G√ºemes" alt="Gauchos de G√ºemes" className="rounded-lg shadow-md border-2 border-orange-300 w-full transition-transform duration-300 hover:scale-105" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/300x200/ff7f00/ffffff?text=Imagen+no+disponible"; }} />
            <p className="text-center text-sm text-gray-500 mt-2">
              <span className="font-semibold italic">Dibujo:</span> Gauchos patriotas defendiendo el territorio, clave en la resistencia.
            </p>
          </div>
          <div className="flex flex-col items-center">
            <img src="https://placehold.co/300x200/6a0dad/ffffff?text=La+Casa+de+Tucum√°n" alt="La Casa de Tucum√°n" className="rounded-lg shadow-md border-2 border-purple-300 w-full transition-transform duration-300 hover:scale-105" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/300x200/6a0dad/ffffff?text=Imagen+no+disponible"; }} />
            <p className="text-center text-sm text-gray-500 mt-2">
              <span className="font-semibold italic">Dibujo:</span> El hist√≥rico lugar donde se declar√≥ la Independencia.
            </p>
          </div>
          <div className="flex flex-col items-center">
            <img src="https://placehold.co/300x200/36b37e/ffffff?text=Bandera+Argentina" alt="Bandera Argentina" className="rounded-lg shadow-md border-2 border-green-300 w-full transition-transform duration-300 hover:scale-105" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/300x200/36b37e/ffffff?text=Imagen+no+disponible"; }} />
            <p className="text-center text-sm text-gray-500 mt-2">
              <span className="font-semibold italic">Ilustraci√≥n:</span> Nuestra gloriosa bandera nacional, flameando por siempre.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
);

const Protagonistas = () => (
  <section className="p-8 bg-purple-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
    <h2 className="text-4xl font-extrabold text-purple-800 mb-6 text-center">¬°Los Protagonistas de la Gesta!</h2>
    <p className="text-gray-700 text-lg mb-6 text-center">
      Conoc√© a los que se la jugaron para que hoy seamos libres. ¬°Cada uno aport√≥ lo suyo!
    </p>

    <div className="overflow-x-auto">
      <table className="min-w-full bg-white rounded-xl shadow-md border border-purple-200">
        <thead>
          <tr className="bg-purple-100 text-purple-700 uppercase text-sm leading-normal">
            <th className="py-3 px-6 text-left">Nombre</th>
            <th className="py-3 px-6 text-left">Rol Principal</th>
            <th className="py-3 px-6 text-left">Aporte Clave</th>
            <th className="py-3 px-6 text-left hidden md:table-cell">Regi√≥n de Influencia</th>
          </tr>
        </thead>
        <tbody className="text-gray-700 text-sm font-light">
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Manuel Belgrano</td>
            <td className="py-3 px-6">General, Creador de la Bandera</td>
            <td className="py-3 px-6">Impulsor clave de la independencia, victorias en el Norte y visi√≥n de Estado.</td>
            <td className="py-3 px-6 hidden md:table-cell">R√≠o de la Plata, Norte</td>
          </tr>
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Jos√© de San Mart√≠n</td>
            <td className="py-3 px-6">Libertador, Estratega Militar</td>
            <td className="py-3 px-6">Organiz√≥ el Cruce de los Andes, pilar de la independencia continental.</td>
            <td className="py-3 px-6 hidden md:table-cell">Cuyo, Chile, Per√∫</td>
          </tr>
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Mart√≠n Miguel de G√ºemes</td>
            <td className="py-3 px-6">L√≠der Gaucho, Defensor del Norte</td>
            <td className="py-3 px-6">Guerra de guerrillas fundamental para contener los avances realistas.</td>
            <td className="py-3 px-6 hidden md:table-cell">Salta</td>
          </tr>
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Juan Mart√≠n de Pueyrred√≥n</td>
            <td className="py-3 px-6">Director Supremo</td>
            <td className="py-3 px-6">Figura clave en la organizaci√≥n del Congreso y apoyo a San Mart√≠n.</td>
            <td className="py-3 px-6 hidden md:table-cell">Buenos Aires, Tucum√°n</td>
          </tr>
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Bernardino Rivadavia</td>
            <td className="py-3 px-6">Pol√≠tico, Primer Presidente</td>
            <td className="py-3 px-6">Promotor de la modernizaci√≥n del Estado, aunque con visiones controvertidas.</td>
            <td className="py-3 px-6 hidden md:table-cell">Buenos Aires</td>
          </tr>
          <tr className="border-b border-gray-200 hover:bg-gray-50 transition-colors duration-200">
            <td className="py-3 px-6">Juan Jos√© Castelli</td>
            <td className="py-3 px-6">Orador de Mayo, Revolucionario</td>
            <td className="py-3 px-6">Figura central en la Revoluci√≥n de Mayo, defendi√≥ ideas de libertad.</td>
            <td className="py-3 px-6 hidden md:table-cell">Buenos Aires, Alto Per√∫</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
);

const DatosCuriosos = () => (
  <section className="p-8 bg-green-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
    <h2 className="text-4xl font-extrabold text-green-800 mb-6 text-center">¬°Datos Curiosos que no te Contaron!</h2>
    <p className="text-gray-700 text-lg mb-6 text-center">
      ¬øSab√≠as que...? Cosas raras y copadas que pasaron en la √©poca de la Independencia.
    </p>

    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div className="bg-white p-6 rounded-xl shadow-md border border-green-200 transition-transform duration-300 hover:scale-105">
        <h3 className="text-2xl font-bold text-green-700 mb-3 flex items-center">
          <SearchIcon className="mr-2 text-green-500" /> El Secreto del Acta
        </h3>
        <p className="text-gray-800">
          El Acta de la Independencia se redact√≥ en castellano, quechua y aymara. ¬°Quer√≠an que todos la entendieran, desde el m√°s criollo hasta los pueblos originarios! ¬°Inclusi√≥n a full!
        </p>
      </div>
      <div className="bg-white p-6 rounded-xl shadow-md border border-green-200 transition-transform duration-300 hover:scale-105">
        <h3 className="text-2xl font-bold text-green-700 mb-3 flex items-center">
          <HistoryIcon className="mr-2 text-green-500" /> ¬øY el Rey de Copas?
        </h3>
        <p className="text-gray-800">
          Hubo un debate tremendo sobre si poner un rey inca en el trono argentino. ¬°S√≠, le√≠ste bien! La idea era buscar apoyo en las antiguas ra√≠ces americanas. Al final no prosper√≥, pero la idea estuvo ah√≠.
        </p>
      </div>
      <div className="bg-white p-6 rounded-xl shadow-md border border-green-200 transition-transform duration-300 hover:scale-105">
        <h3 className="text-2xl font-bold text-green-700 mb-3 flex items-center">
          <MessageCircleIcon className="mr-2 text-green-500" /> Viajes Tortuosos
        </h3>
        <p className="text-gray-800">
          Los diputados viajaron kil√≥metros y kil√≥metros para llegar a Tucum√°n, ¬°en carretas y a caballo! Tardaban semanas, sorteando peligros y sin GPS. ¬°Un verdadero sacrificio por la Patria!
        </p>
      </div>
      <div className="bg-white p-6 rounded-xl shadow-md border border-green-200 transition-transform duration-300 hover:scale-105">
        <h3 className="text-2xl font-bold text-green-700 mb-3 flex items-center">
          <GamepadIcon className="mr-2 text-green-500" /> El Baile Patriota
        </h3>
        <p className="text-gray-800">
          Despu√©s de firmar la Independencia, se arm√≥ un fiest√≥n en la Casa Hist√≥rica, ¬°con bailes y todo! Fue una celebraci√≥n por todo lo alto, para festejar la nueva naci√≥n.
        </p>
      </div>
    </div>
  </section>
);

const SopaDeLetras = () => {
  const words = ['INDEPENDENCIA', 'LIBERTAD', 'TUCUMAN', 'BELGRANO', 'SANMARTIN', 'CONGRESO', 'PATRIA', 'ARGENTINA', 'ESPA√ëA', 'GAUCHOS', 'JULIO', 'JUNTA', 'GUEMES'];
  const gridSize = 15; // 15x15 grid
  const [grid, setGrid] = useState([]);
  const [selectedCells, setSelectedCells] = useState([]);
  const [foundWords, setFoundWords] = useState(new Set());
  const [message, setMessage] = useState('');

  useEffect(() => {
    generateGrid();
  }, []);

  const generateGrid = () => {
    let newGrid = Array(gridSize).fill(0).map(() => Array(gridSize).fill(''));
    let placedWords = [];

    // Sort words by length descending to place longer words first
    const sortedWords = [...words].sort((a, b) => b.length - a.length);

    sortedWords.forEach(word => {
      let placed = false;
      let attempts = 0;
      while (!placed && attempts < 500) { // Limit attempts to prevent infinite loops
        const direction = Math.floor(Math.random() * 8); // 8 directions (horiz, vert, diag)
        const row = Math.floor(Math.random() * gridSize);
        const col = Math.floor(Math.random() * gridSize);

        if (canPlaceWord(newGrid, word, row, col, direction)) {
          placeWord(newGrid, word, row, col, direction);
          placedWords.push(word);
          placed = true;
        }
        attempts++;
      }
    });

    // Fill remaining empty cells with random letters
    for (let r = 0; r < gridSize; r++) {
      for (let c = 0; c < gridSize; c++) {
        if (newGrid[r][c] === '') {
          newGrid[r][c] = String.fromCharCode(65 + Math.floor(Math.random() * 26)); // Random A-Z
        }
      }
    }
    setGrid(newGrid);
    setFoundWords(new Set());
    setMessage('');
    setSelectedCells([]);
  };

  const canPlaceWord = (currentGrid, word, row, col, direction) => {
    for (let i = 0; i < word.length; i++) {
      let r = row;
      let c = col;
      switch (direction) {
        case 0: c += i; break; // Horizontal
        case 1: c -= i; break; // Horizontal Back
        case 2: r += i; break; // Vertical
        case 3: r -= i; break; // Vertical Back
        case 4: r += i; c += i; break; // Diagonal Down-Right
        case 5: r += i; c -= i; break; // Diagonal Down-Left
        case 6: r -= i; c += i; break; // Diagonal Up-Right
        case 7: r -= i; c -= i; break; // Diagonal Up-Left
        default: break;
      }

      if (r < 0 || r >= gridSize || c < 0 || c >= gridSize ||
        (currentGrid[r][c] !== '' && currentGrid[r][c] !== word[i])) {
        return false;
      }
    }
    return true;
  };

  const placeWord = (currentGrid, word, row, col, direction) => {
    for (let i = 0; i < word.length; i++) {
      let r = row;
      let c = col;
      switch (direction) {
        case 0: c += i; break;
        case 1: c -= i; break;
        case 2: r += i; break;
        case 3: r -= i; break;
        case 4: r += i; c += i; break;
        case 5: r += i; c -= i; break;
        case 6: r -= i; c += i; break;
        case 7: r -= i; c -= i; break;
        default: break;
      }
      currentGrid[r][c] = word[i].toUpperCase();
    }
  };

  const handleCellClick = (row, col) => {
    const newSelectedCells = [...selectedCells, { r: row, c: col }];
    setSelectedCells(newSelectedCells);

    if (newSelectedCells.length > 1) {
      checkWord(newSelectedCells);
    }
  };

  const checkWord = (cells) => {
    const sortedCells = [...cells].sort((a, b) => {
      if (a.r !== b.r) return a.r - b.r;
      return a.c - b.c;
    });

    let formedWord = '';
    for (const cell of sortedCells) {
      formedWord += grid[cell.r][cell.c];
    }

    let found = false;
    for (const word of words) {
      if (formedWord.toUpperCase().includes(word.toUpperCase()) || word.toUpperCase().includes(formedWord.toUpperCase())) {
        if (word.toUpperCase() === formedWord.toUpperCase()) { // Exact match
          setFoundWords(prev => new Set(prev).add(word));
          setMessage(`¬°Palabra encontrada: ${word}!`);
          found = true;
          break;
        }
      }
    }

    if (!found) {
      setMessage('Esa no es una palabra v√°lida.');
    }
    setSelectedCells([]);
  };

  const isCellSelected = (row, col) => {
    return selectedCells.some(cell => cell.r === row && cell.c === col);
  };

  const isWordFound = (word) => foundWords.has(word);
  const allWordsFound = words.every(word => foundWords.has(word));

  return (
    <section className="p-8 bg-yellow-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
      <h2 className="text-4xl font-extrabold text-yellow-800 mb-6 text-center">¬°Sopa de Letras de la Independencia!</h2>
      <p className="text-gray-700 text-lg mb-6 text-center">
        Encontr√° todas las palabras relacionadas con el 9 de julio en la sopa de letras. Pod√©s buscar en cualquier direcci√≥n: horizontal, vertical y diagonal, ¬°para adelante y para atr√°s! ¬°A jugar!
      </p>

      <div className="flex flex-col md:flex-row gap-8">
        <div className="flex-1 overflow-x-auto overflow-y-auto max-h-[500px]">
          <div className="grid border border-yellow-300 rounded-lg overflow-hidden w-full h-full" style={{ gridTemplateColumns: `repeat(${gridSize}, minmax(0, 1fr))` }}>
            {grid.map((row, rIdx) => (
              row.map((cell, cIdx) => (
                <div
                  key={`${rIdx}-${cIdx}`}
                  className={`flex items-center justify-center p-1 text-xl font-bold aspect-square transition-colors duration-200 ${isCellSelected(rIdx, cIdx) ? 'bg-yellow-300 text-yellow-900 animate-pulse-bg' : 'bg-white text-yellow-800 hover:bg-yellow-100'}`}
                  onClick={() => handleCellClick(rIdx, cIdx)}
                >
                  {cell}
                </div>
              ))
            ))}
          </div>
        </div>

        <div className="md:w-1/3 bg-white p-6 rounded-xl shadow-md border border-yellow-200">
          <h3 className="text-2xl font-bold text-yellow-700 mb-4">Palabras a Encontrar:</h3>
          <ul className="list-disc pl-5 space-y-2">
            {words.map((word) => (
              <li key={word} className={`${isWordFound(word) ? 'text-green-600 line-through' : 'text-gray-800'}`}>
                {word} {isWordFound(word) && '‚úÖ'}
              </li>
            ))}
          </ul>
          {allWordsFound && (
            <p className="mt-6 text-center text-xl font-bold text-green-700 animate-bounce-in">
              ¬°Felicitaciones! ¬°Encontraste todas las palabras!
            </p>
          )}
          {message && <p className={`mt-4 text-center text-lg ${message.includes('¬°Palabra encontrada') ? 'text-green-700 font-bold' : 'text-red-700'}`}>{message}</p>}
          <button
            onClick={generateGrid}
            className="mt-6 w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
          >
            <RefreshCwIcon className="mr-2" /> Reiniciar Juego
          </button>
        </div>
      </div>
    </section>
  );
};

const CrucigramaAcrostico = () => {
  const clues = [
    { letter: 'I', clue: 'Lo que se declar√≥ el 9 de julio, el objetivo principal (12 letras).', answer: 'INDEPENDENCIA' },
    { letter: 'N', clue: 'Lo que anhelaban los patriotas (8 letras).', answer: 'LIBERTAD' },
    { letter: 'D', clue: 'Continente donde se encuentran las Provincias Unidas (7 letras).', answer: 'AMERICA' }, // Adjusted to fit I, N, D
    { letter: 'E', clue: 'El mes en el que se firm√≥ la Declaraci√≥n (5 letras).', answer: 'JULIO' }, // Adjusted to fit E
    { letter: 'P', clue: 'El pueblo que lider√≥ el General G√ºemes en Salta (7 letras).', answer: 'GAUCHOS' },
    { letter: 'E', clue: 'El pa√≠s del que se buscaron independizar (6 letras).', answer: 'ESPA√ëA' }, // Adjusted to fit E
    { letter: 'N', clue: 'La ciudad donde se realiz√≥ el Congreso (7 letras).', answer: 'TUCUMAN' },
    { letter: 'D', clue: 'Apellido del creador de la Bandera (8 letras).', answer: 'BELGRANO' }, // Adjusted to fit D
    { letter: 'E', clue: 'Lo que se firm√≥ el 9 de julio, el documento oficial (4 letras).', answer: 'ACTA' }, // Adjusted to fit E
    { letter: 'N', clue: 'La forma de gobierno que finalmente se adopt√≥ en Argentina (9 letras).', answer: 'REPUBLICA' }, // Adjusted to fit N
    { letter: 'C', clue: 'Tipo de reuni√≥n de diputados (8 letras).', answer: 'CONGRESO' },
    { letter: 'I', clue: 'Lo que se buscaba romper con Espa√±a (8 letras).', answer: 'COLONIAL' },
    { letter: 'A', clue: 'Apellido del Libertador de Argentina y Chile (8 letras).', answer: 'SANMARTIN' }, // Adjusted to fit A
  ];

  const [answers, setAnswers] = useState(Array(clues.length).fill(''));
  const [feedback, setFeedback] = useState(Array(clues.length).fill(null)); // null: not checked, true: correct, false: incorrect
  const [message, setMessage] = useState('');

  const handleInputChange = (e, index) => {
    const newAnswers = [...answers];
    newAnswers[index] = e.target.value.toUpperCase();
    setAnswers(newAnswers);
  };

  const checkAnswers = () => {
    const newFeedback = answers.map((ans, index) => ans === clues[index].answer.toUpperCase());
    setFeedback(newFeedback);

    const correctCount = newFeedback.filter(f => f).length;
    if (correctCount === clues.length) {
      setMessage('¬°Felicitaciones! ¬°Completaste el crucigrama! La palabra secreta es: INDEPENDENCIA');
    } else {
      setMessage(`Todav√≠a quedan ${clues.length - correctCount} pistas por resolver. ¬°Segu√≠ intentando!`);
    }
  };

  const getAcrosticLetter = (index) => clues[index].letter;

  const getAcrosticWord = () => {
    return clues.map((clue, index) => {
      if (feedback[index] === true) {
        return clue.letter;
      }
      return '_'; // Return a placeholder
    }).join('');
  };

  const allCluesCorrect = feedback.every(f => f === true);

  const resetGame = () => {
    setAnswers(Array(clues.length).fill(''));
    setFeedback(Array(clues.length).fill(null));
    setMessage('');
  };

  return (
    <section className="p-8 bg-red-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
      <h2 className="text-4xl font-extrabold text-red-800 mb-6 text-center">¬°Crucigrama Acr√≥stico Patriota!</h2>
      <p className="text-gray-700 text-lg mb-6 text-center">
        Resolv√© las pistas y rellen√° las palabras. Si lo hac√©s bien, ¬°la palabra secreta vertical se revelar√°! ¬°Atenti con las respuestas, eh!
      </p>

      <div className="flex flex-col md:flex-row gap-8 items-start">
        <div className="flex-1 bg-white p-6 rounded-xl shadow-md border border-red-200">
          <h3 className="text-2xl font-bold text-red-700 mb-4">Pistas:</h3>
          <form onSubmit={(e) => { e.preventDefault(); checkAnswers(); }}>
            {clues.map((clue, index) => (
              <div key={index} className="mb-4 flex items-center">
                <span className="font-extrabold text-red-800 text-xl w-8">{getAcrosticLetter(index)}.</span>
                <p className="text-gray-700 mr-4 flex-1">{clue.clue}</p>
                <input
                  type="text"
                  value={answers[index]}
                  onChange={(e) => handleInputChange(e, index)}
                  className={`border-b-2 px-2 py-1 text-lg font-semibold uppercase focus:outline-none focus:border-red-500 w-36 ${feedback[index] === true ? 'border-green-500 text-green-700' : feedback[index] === false ? 'border-red-500 text-red-700' : 'border-gray-300 text-gray-800'}`}
                  disabled={feedback[index] === true}
                />
              </div>
            ))}
            <div className="flex justify-center space-x-4 mt-6">
              <button
                type="submit"
                className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
              >
                <SearchIcon className="mr-2" /> Verificar Respuestas
              </button>
              <button
                type="button"
                onClick={resetGame}
                className="bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
              >
                <RefreshCwIcon className="mr-2" /> Reiniciar
              </button>
            </div>
          </form>
          {message && <p className={`mt-4 text-center text-lg ${allCluesCorrect ? 'text-green-700 font-bold animate-fade-in' : 'text-red-700 animate-pulse-text'}`}>{message}</p>}
        </div>

        <div className="md:w-1/3 bg-white p-6 rounded-xl shadow-md border border-red-200 text-center flex flex-col items-center justify-center">
          <h3 className="text-2xl font-bold text-red-700 mb-4">Palabra Secreta:</h3>
          <p className="text-5xl font-extrabold tracking-widest text-red-900 animate-bounce-in">
            {getAcrosticWord()}
          </p>
          <p className="text-gray-600 mt-4">¬°Se revela a medida que acert√°s!</p>
        </div>
      </div>
    </section>
  );
};

const RoscoDePreguntas = () => {
  // Define your questions for the game
  const initialQuestions = shuffleArray([
    { letter: 'A', clue: 'Con la A: Apellido del libertador que cruz√≥ los Andes.', answer: 'SANMARTIN' },
    { letter: 'B', clue: 'Con la B: Creador de nuestra gloriosa bandera.', answer: 'BELGRANO' },
    { letter: 'C', clue: 'Con la C: La ciudad donde se declar√≥ la independencia, en Tucum√°n.', answer: 'SANMIGUEL' }, // San Miguel de Tucum√°n
    { letter: 'D', clue: 'Con la D: Documento fundamental que se firm√≥ el 9 de julio.', answer: 'DECLARACION' },
    { letter: 'E', clue: 'Con la E: Pa√≠s europeo del que nos independizamos.', answer: 'ESPA√ëA' },
    { letter: 'F', clue: 'Con la F: Nombre del rey espa√±ol en el momento de la independencia.', answer: 'FERNANDO' },
    { letter: 'G', clue: 'Con la G: Apellido del l√≠der gaucho defensor del Norte.', answer: 'GUEMES' },
    { letter: 'H', clue: 'Con la H: El lugar hist√≥rico en Tucum√°n donde se sesion√≥ el Congreso.', answer: 'CASA' }, // Casa Hist√≥rica
    { letter: 'I', clue: 'Con la I: Lo que busc√°bamos obtener el 9 de julio.', answer: 'INDEPENDENCIA' },
    { letter: 'J', clue: 'Con la J: El mes en que se declar√≥ la independencia.', answer: 'JULIO' },
    { letter: 'L', clue: 'Con la L: Condici√≥n que se buscaba para las Provincias Unidas, opuesto a colonia.', answer: 'LIBERTAD' },
    { letter: 'M', clue: 'Con la M: La revoluci√≥n de mayo de 1810 fue el primer paso. (Mes)', answer: 'MAYO' },
    { letter: 'N', clue: 'Con la N: Emperador franc√©s que invadi√≥ Espa√±a y desestabiliz√≥ la monarqu√≠a espa√±ola.', answer: 'NAPOLEON' },
    { letter: 'O', clue: 'Con la O: Nombre del r√≠o m√°s importante del Virreinato del R√≠o de la Plata.', answer: 'PLATA' }, // R√≠o de la Plata
    { letter: 'P', clue: 'Con la P: El t√≠tulo que se le daba a los hijos de espa√±oles nacidos en Am√©rica.', answer: 'CRIOLLOS' }, // CRIOLLOS, not P
    { letter: 'Q', clue: 'Con la Q: Apellido del Director Supremo que apoy√≥ a San Mart√≠n (empieza con P, pero es para despistar).', answer: 'PUEYRREDON' }, // PUEYRREDON, not Q
    { letter: 'R', clue: 'Con la R: Forma de gobierno que se buscaba establecer para el nuevo pa√≠s.', answer: 'REPUBLICA' },
    { letter: 'S', clue: 'Con la S: Regi√≥n donde San Mart√≠n organiz√≥ el Ej√©rcito de los Andes.', answer: 'CUYO' }, // CUYO, not S
    { letter: 'T', clue: 'Con la T: La provincia argentina donde se firm√≥ la Declaraci√≥n.', answer: 'TUCUMAN' },
    { letter: 'U', clue: 'Con la U: Que no est√°n divididas, como las Provincias Unidas.', answer: 'UNIDAS' },
    { letter: 'V', clue: 'Con la V: M√°xima autoridad de la corona espa√±ola en el Virreinato antes de 1810.', answer: 'VIRREY' },
    { letter: 'X', clue: 'Con la X: Lo que se elimin√≥ con la independencia. (Termina con X)', answer: 'ANEXION' }, // ANEXION, not X
    { letter: 'Y', clue: 'Con la Y: Instrumento musical tradicional de la zona andina, a veces asociado a festejos patrios (termina con Y).', answer: 'ERKENAY' }, // ERKENAY, not Y
    { letter: 'Z', clue: 'Con la Z: Territorio que abarcaba el antiguo Virreinato, al sur del continente.', answer: 'ZONA' }, // ZONA, not Z
  ]);

  const [questions, setQuestions] = useState(initialQuestions);
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
  const [answeredLetters, setAnsweredLetters] = useState(new Set());
  const [score, setScore] = useState(0);
  const [inputValue, setInputValue] = useState('');
  const [message, setMessage] = useState('');
  const [gameOver, setGameOver] = useState(false);
  const [gameStarted, setGameStarted] = useState(false);

  useEffect(() => {
    if (gameStarted && !gameOver && answeredLetters.size === questions.length) {
      setGameOver(true);
      setMessage(`¬°Juego terminado! Tu puntaje final es: ${score} de ${questions.length}. ¬°Lo hiciste genial!`);
    }
  }, [answeredLetters, questions.length, score, gameOver, gameStarted]);

  const startGame = () => {
    setGameStarted(true);
    setGameOver(false);
    setScore(0);
    setAnsweredLetters(new Set());
    setInputValue('');
    setMessage('');
    setCurrentQuestionIndex(0);
    setQuestions(shuffleArray([...initialQuestions])); // Reshuffle questions
  };

  const handleAnswerChange = (e) => {
    setInputValue(e.target.value.toUpperCase());
  };

  const checkAnswer = () => {
    const currentQuestion = questions[currentQuestionIndex];
    if (inputValue.toUpperCase() === currentQuestion.answer.toUpperCase()) {
      setScore(score + 1);
      setMessage('¬°Correcto! üéâ');
      setAnsweredLetters(prev => new Set(prev).add(currentQuestion.letter));
      moveToNextQuestion();
    } else {
      setMessage('¬°Incorrecto! üò• Intent√° de nuevo o pasapalabra.');
    }
    setInputValue('');
  };

  const handlePasapalabra = () => {
    setMessage('¬°Pasapalabra! La dejamos para despu√©s.');
    moveToNextQuestion();
  };

  const moveToNextQuestion = () => {
    let nextIndex = (currentQuestionIndex + 1) % questions.length;
    let attempts = 0; // Loop to find the next question that hasn't been presented yet
    while (answeredLetters.has(questions[nextIndex].letter) && attempts < questions.length) {
      nextIndex = (nextIndex + 1) % questions.length;
      attempts++;
    }
    if (attempts === questions.length) { // All questions have been presented at least once
      setGameOver(true);
      setMessage(`¬°Juego terminado! Tu puntaje final es: ${score} de ${questions.length}. ¬°Lo hiciste genial!`);
    } else {
      setCurrentQuestionIndex(nextIndex);
    }
  };

  // Calculate positions for circular layout
  const numLetters = initialQuestions.length;
  const radius = 180; // Radius of the circle
  const centerOffset = 200; // Offset from top/left for centering the circle
  const getLetterPosition = (index) => {
    const angle = (index / numLetters) * 2 * Math.PI - Math.PI / 2; // Start from top (-90 degrees)
    const x = centerOffset + radius * Math.cos(angle);
    const y = centerOffset + radius * Math.sin(angle);
    return { left: `${x}px`, top: `${y}px` };
  };

  return (
    <section className="p-8 bg-blue-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
      <h2 className="text-4xl font-extrabold text-blue-800 mb-6 text-center">¬°El Rosco de la Independencia!</h2>
      <p className="text-gray-700 text-lg mb-6 text-center">
        ¬øTe anim√°s a adivinar las palabras con las pistas? ¬°Pon√© a prueba tus conocimientos hist√≥ricos y complet√° el rosco!
      </p>

      {!gameStarted ? (
        <div className="text-center">
          <button
            onClick={startGame}
            className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-xl transition duration-300 shadow-lg transform hover:scale-110"
          >
            Comenzar Juego
          </button>
        </div>
      ) : (
        <div className="flex flex-col md:flex-row gap-8 items-center justify-center">
          <div className="md:w-2/3 bg-white p-6 rounded-xl shadow-md border border-blue-200">
            {!gameOver ? (
              <>
                <h3 className="text-3xl font-bold text-blue-700 mb-4 text-center">
                  Pregunta para la letra "{questions[currentQuestionIndex].letter}":
                </h3>
                <p className="text-gray-800 text-xl mb-6 text-center italic">
                  {questions[currentQuestionIndex].clue}
                </p>
                <form onSubmit={(e) => { e.preventDefault(); checkAnswer(); }} className="flex flex-col items-center">
                  <input
                    type="text"
                    value={inputValue}
                    onChange={handleAnswerChange}
                    className="border-2 border-blue-300 rounded-lg px-4 py-2 text-xl mb-4 w-full max-w-md text-center focus:outline-none focus:border-blue-500"
                    placeholder="Tu respuesta..."
                    autoFocus
                  />
                  <div className="flex space-x-4">
                    <button
                      type="submit"
                      className="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
                      disabled={gameOver}
                    >
                      <CrossIcon className="mr-2 rotate-45" /> Enviar Respuesta
                    </button>
                    <button
                      type="button"
                      onClick={handlePasapalabra}
                      className="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
                      disabled={gameOver}
                    >
                      <CrossIcon className="mr-2" /> Pasapalabra
                    </button>
                  </div>
                </form>
                {message && <p className={`mt-4 text-center text-lg ${message.includes('Correcto') ? 'text-green-700 font-bold animate-fade-in' : 'text-red-700 animate-pulse-text'}`}>{message}</p>}
              </>
            ) : (
              <div className="text-center">
                <h3 className="text-3xl font-bold text-blue-700 mb-4">¬°Juego Terminado!</h3>
                <p className="text-gray-800 text-2xl mb-6">Tu puntaje final es: <span className="font-extrabold text-blue-900">{score}</span> de <span className="font-extrabold text-blue-900">{questions.length}</span></p>
                <button
                  onClick={startGame} // Use startGame to reset and start anew
                  className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
                >
                  <RefreshCwIcon className="mr-2" /> Jugar de Nuevo
                </button>
              </div>
            )}
          </div>

          <div className="md:w-1/3 bg-white p-6 rounded-xl shadow-md border border-blue-200 flex justify-center items-center relative" style={{ height: '400px', width: '400px' }}>
            {questions.map((q, index) => {
              const pos = getLetterPosition(index);
              const isCurrent = index === currentQuestionIndex;
              const isAnswered = answeredLetters.has(q.letter);
              return (
                <div
                  key={q.letter}
                  className={`absolute w-12 h-12 flex items-center justify-center rounded-full text-lg font-bold
                    ${isAnswered ? 'bg-green-500 text-white' : 'bg-blue-300 text-blue-900'}
                    ${isCurrent ? 'ring-4 ring-yellow-400 scale-125' : ''}
                    transition-all duration-300 ease-in-out`}
                  style={{ left: pos.left, top: pos.top, transform: isCurrent ? 'translate(-50%, -50%) scale(1.25)' : 'translate(-50%, -50%)' }}
                >
                  {q.letter}
                </div>
              );
            })}
          </div>
        </div>
      )}
    </section>
  );
};

const Ahorcados = () => {
  const words = [
    { word: 'INDEPENDENCIA', hint: 'Lo que se declar√≥ el 9 de julio para nuestro pa√≠s.' },
    { word: 'ESPA√ëA', hint: 'Pa√≠s del que se buscaba la independencia, la antigua metr√≥poli.' },
    { word: 'REPUBLICA', hint: 'La forma de gobierno que finalmente se adopt√≥ en Argentina.' },
    { word: 'MAYO', hint: 'El mes de la Revoluci√≥n que inici√≥ el camino hacia el 9 de julio.' },
    { word: 'FERNANDO', hint: 'El nombre del rey espa√±ol en ese momento (Fernando ___ VII).' },
    { word: 'GAUCHOS', hint: 'Los valientes hombres de a caballo que defendieron el norte.' },
    { word: 'ACTA', hint: 'El documento que se firm√≥ el 9 de julio, el escrito oficial.' },
    { word: 'RIVADAVIA', hint: 'Pol√≠tico influyente de la √©poca, Director Supremo posterior.' },
    { word: 'CRIOLLOS', hint: 'As√≠ se llamaba a los hijos de espa√±oles nacidos en Am√©rica.' },
    { word: 'TUCUMAN', hint: 'La provincia donde se reunieron los congresales.' },
    { word: 'BELGRANO', hint: 'General y creador de la bandera.' },
    { word: 'SANMARTIN', hint: 'El libertador que cruz√≥ los Andes.' },
    { word: 'CONGRESO', hint: 'La reuni√≥n de diputados que decidi√≥ la independencia.' },
  ];
  const alphabet = 'ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ'.split('');

  const [currentWord, setCurrentWord] = useState({});
  const [guessedLetters, setGuessedLetters] = useState(new Set());
  const [incorrectGuesses, setIncorrectGuesses] = useState(0);
  const [message, setMessage] = useState('');
  const [gameOver, setGameOver] = useState(false);
  const maxIncorrectGuesses = 9; // Increased stages for hangman (more detailed drawing)

  useEffect(() => {
    startNewGame();
  }, []);

  const startNewGame = () => {
    const randomIndex = Math.floor(Math.random() * words.length);
    setCurrentWord(words[randomIndex]);
    setGuessedLetters(new Set());
    setIncorrectGuesses(0);
    setMessage('');
    setGameOver(false);
  };

  const displayWord = currentWord.word ?
    currentWord.word.split('').map(letter => (guessedLetters.has(letter) ? letter : '_')).join(' ') : '';

  useEffect(() => {
    if (currentWord.word && displayWord.replace(/ /g, '') === currentWord.word) {
      setMessage('¬°Ganaste! ¬°Felicitaciones! üéâ');
      setGameOver(true);
    } else if (incorrectGuesses >= maxIncorrectGuesses) {
      setMessage(`¬°Perdiste! La palabra era: ${currentWord.word}. üò•`);
      setGameOver(true);
    }
  }, [guessedLetters, incorrectGuesses, currentWord, displayWord]);

  const handleGuess = (letter) => {
    if (gameOver || guessedLetters.has(letter)) return;

    const newGuessedLetters = new Set(guessedLetters);
    newGuessedLetters.add(letter);
    setGuessedLetters(newGuessedLetters);

    if (!currentWord.word.includes(letter)) {
      setIncorrectGuesses(incorrectGuesses + 1);
      setMessage(`La letra "${letter}" no est√°. Te quedan ${maxIncorrectGuesses - (incorrectGuesses + 1)} intentos.`);
    } else {
      setMessage(`¬°Bien! La letra "${letter}" est√°.`);
    }
  };

  // Function to render the hangman drawing based on incorrectGuesses
  const renderHangman = () => {
    const parts = [
      'M√°stil', // 1 incorrect guess
      'Soporte horizontal', // 2
      'Soporte vertical', // 3
      'Soga', // 4
      'Cabeza', // 5
      'Cuerpo', // 6
      'Brazo izquierdo', // 7
      'Brazo derecho', // 8
      'Pierna izquierda', // 9
      'Pierna derecha' // 10 (not used as max is 9)
    ];

    return (
      <div className="relative w-48 h-48 border-2 border-gray-700 mx-auto mb-6">
        {/* Base */}
        <div className="absolute bottom-0 left-0 w-full h-4 bg-gray-700"></div>
        {/* Vertical post */}
        {incorrectGuesses >= 1 && <div className="absolute bottom-4 left-1/4 w-3 h-full bg-gray-700 transform -translate-x-1/2"></div>}
        {/* Horizontal post */}
        {incorrectGuesses >= 2 && <div className="absolute top-0 left-1/4 w-1/2 h-3 bg-gray-700"></div>}
        {/* Small vertical support */}
        {incorrectGuesses >= 3 && <div className="absolute top-0 right-0 w-3 h-8 bg-gray-700"></div>}
        {/* Rope */}
        {incorrectGuesses >= 4 && <div className="absolute top-8 right-0 w-1 h-8 bg-gray-700"></div>}

        {/* Hangman parts */}
        {incorrectGuesses >= 5 && <div className="absolute top-16 right-0 w-12 h-12 rounded-full border-2 border-gray-700 transform -translate-y-1/2 -translate-x-1/2"></div>} {/* Head */}
        {incorrectGuesses >= 6 && <div className="absolute top-24 right-0 w-1 h-12 bg-gray-700 transform -translate-y-1/2 -translate-x-1/2"></div>} {/* Body */}
        {incorrectGuesses >= 7 && <div className="absolute top-24 right-0 w-1 h-8 bg-gray-700 transform -translate-y-1/2 -translate-x-1/2 rotate-45"></div>} {/* Left Arm */}
        {incorrectGuesses >= 8 && <div className="absolute top-24 right-0 w-1 h-8 bg-gray-700 transform -translate-y-1/2 -translate-x-1/2 -rotate-45"></div>} {/* Right Arm */}
        {incorrectGuesses >= 9 && <div className="absolute top-36 right-0 w-1 h-8 bg-gray-700 transform -translate-y-1/2 -translate-x-1/2 rotate-45"></div>} {/* Left Leg */}
        {incorrectGuesses >= maxIncorrectGuesses && <div className="absolute top-36 right-0 w-1 h-8 bg-gray-700 transform -translate-y-1/2 -translate-x-1/2 -rotate-45"></div>} {/* Right Leg (last incorrect guess) */}
      </div>
    );
  };

  return (
    <section className="p-8 bg-purple-50 rounded-xl shadow-lg mb-8 mx-auto max-w-4xl animate-fade-in">
      <h2 className="text-4xl font-extrabold text-purple-800 mb-6 text-center">¬°El Ahorcado de la Independencia!</h2>
      <p className="text-gray-700 text-lg mb-6 text-center">
        Adivin√° la palabra oculta letra por letra. ¬°No dejes que el patriota sea ahorcado!
      </p>

      <div className="flex flex-col md:flex-row gap-8 items-start">
        <div className="md:w-1/2 bg-white p-6 rounded-xl shadow-md border border-purple-200 text-center">
          {renderHangman()}
          <h3 className="text-2xl font-bold text-purple-700 mb-4">Pista:</h3>
          <p className="text-gray-800 text-xl mb-6 italic">"{currentWord.hint}"</p>
          <div className="text-5xl font-extrabold tracking-widest text-purple-900 mb-8 select-none">
            {displayWord}
          </div>
          {message && <p className={`mt-4 text-center text-lg ${gameOver ? (incorrectGuesses >= maxIncorrectGuesses ? 'text-red-700 font-bold' : 'text-green-700 font-bold') : 'text-gray-700 animate-pulse-text'}`}>{message}</p>}
          {(gameOver) && (
            <button
              onClick={startNewGame}
              className="mt-6 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg flex items-center justify-center transform hover:scale-105"
            >
              <RefreshCwIcon className="mr-2" /> Jugar de Nuevo
            </button>
          )}
        </div>

        <div className="md:w-1/2 bg-white p-6 rounded-xl shadow-md border border-purple-200">
          <h3 className="text-2xl font-bold text-purple-700 mb-4 text-center">Selecciona una letra:</h3>
          <div className="grid grid-cols-7 sm:grid-cols-8 md:grid-cols-9 lg:grid-cols-10 gap-2 mb-8">
            {alphabet.map((letter) => (
              <button
                key={letter}
                onClick={() => handleGuess(letter)}
                disabled={guessedLetters.has(letter) || gameOver}
                className={`w-12 h-12 flex items-center justify-center rounded-lg text-lg font-bold transition-all duration-200
                  ${guessedLetters.has(letter) ? (currentWord.word && currentWord.word.includes(letter) ? 'bg-green-300 text-green-900 animate-pulse-bg' : 'bg-red-300 text-red-900 animate-shake-sm') : 'bg-purple-200 text-purple-800 hover:bg-purple-300'
                  } ${gameOver ? 'opacity-50 cursor-not-allowed' : ''} shadow-sm hover:shadow-md transform hover:scale-105 `}
              >
                {letter}
              </button>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

const App = () => {
  const [currentSection, setCurrentSection] = useState('home');

  return (
    <div className="font-sans antialiased text-gray-900 min-h-screen relative overflow-x-hidden">
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        /* Argentine Flag Background */
        .flag-background {
          background: linear-gradient(to bottom, #77BEE6 0%, #77BEE6 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #77BEE6 66.6%, #77BEE6 100%);
          background-size: 100% 100%; /* Ensures the gradient covers the full height */
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: -1; /* Send to background */
          opacity: 0.2; /* Make it subtle so text is readable */
        }
        /* Custom Keyframe Animations */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }

        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down { animation: fadeInDown 0.3s ease-out forwards; }

        @keyframes bounceHorizontal {
          0%, 100% { transform: translateX(0); }
          50% { transform: translateX(10px); }
        }
        .animate-bounce-horizontal { animation: bounceHorizontal 1.5s infinite alternate; }

        @keyframes pulseBg {
          0% { background-color: inherit; }
          50% { background-color: rgba(255, 255, 0, 0.3); } /* Example pulse color */
          100% { background-color: inherit; }
        }
        .animate-pulse-bg { animation: pulseBg 1s ease-in-out infinite; }

        @keyframes pulseText {
          0% { opacity: 1; }
          50% { opacity: 0.7; }
          100% { opacity: 1; }
        }
        .animate-pulse-text { animation: pulseText 1.5s ease-in-out infinite; }

        @keyframes bounceIn {
          0% { transform: scale(0.8); opacity: 0; }
          50% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); }
        }
        .animate-bounce-in { animation: bounceIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        @keyframes shakeSmall {
          0% { transform: translateX(0); }
          25% { transform: translateX(-2px); }
          50% { transform: translateX(2px); }
          75% { transform: translateX(-2px); }
          100% { transform: translateX(0); }
        }
        .animate-shake-sm { animation: shakeSmall 0.2s ease-in-out; }
      `}</style>
      <div className="flag-background"></div> {/* Subtle flag background */}

      <Header onNavigate={setCurrentSection} currentSection={currentSection} />

      <main className="container mx-auto p-4">
        {(() => {
          switch (currentSection) {
            case 'home':
              return (
                <div className="flex flex-col items-center justify-center min-h-[60vh] text-center p-4 bg-gray-100 rounded-xl shadow-lg mx-auto max-w-4xl animate-fade-in">
                  <h2 className="text-5xl font-extrabold text-blue-900 mb-6 animate-pulse">
                    ¬°Bienvenida a la Historia de la Independencia Argentina! üá¶üá∑
                  </h2>
                  <p className="text-xl text-gray-700 mb-8">
                    Naveg√° por los men√∫s para descubrir el contexto, el chat de los pr√≥ceres y hasta juegos tem√°ticos. ¬°La data que necesit√°s, con la onda que te gusta y mucho m√°s en detalle!
                  </p>

                  {/* Large Navigation Buttons for Home Page */}
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-2xl mt-8">
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-blue-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-blue-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('contexto')}
                    >
                      <HistoryIcon className="mb-3 w-12 h-12" />
                      Contexto Hist√≥rico
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-green-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-green-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('whatsapp')}
                    >
                      <MessageCircleIcon className="mb-3 w-12 h-12" />
                      WhatsApp Pr√≥ceres
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-purple-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-purple-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('visuales')}
                    >
                      <PaletteIcon className="mb-3 w-12 h-12" />
                      Cuadros & Gr√°ficos
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-yellow-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-yellow-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('protagonistas')}
                    >
                      <UserIcon className="mb-3 w-12 h-12" />
                      Protagonistas
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-orange-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-orange-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('datoscuriosos')}
                    >
                      <SearchIcon className="mb-3 w-12 h-12" />
                      Datos Curiosos
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-red-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-red-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('rosco')}
                    >
                      <GamepadIcon className="mb-3 w-12 h-12" />
                      Rosco de Preguntas
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-teal-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-teal-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('sopa')}
                    >
                      <GamepadIcon className="mb-3 w-12 h-12" />
                      Sopa de Letras
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-indigo-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-indigo-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('crucigrama')}
                    >
                      <GamepadIcon className="mb-3 w-12 h-12" />
                      Crucigrama Acr√≥stico
                    </button>
                    <button
                      className="flex flex-col items-center justify-center p-6 bg-pink-600 text-white rounded-xl shadow-lg transition duration-300 transform hover:scale-105 hover:bg-pink-700 text-2xl font-bold"
                      onClick={() => setCurrentSection('ahorcados')}
                    >
                      <GamepadIcon className="mb-3 w-12 h-12" />
                      El Ahorcado
                    </button>
                  </div>
                  <p className="text-center text-sm text-gray-500 mt-4">
                    <span className="font-semibold italic">Ilustraci√≥n:</span> Nuestra gloriosa bandera nacional, flameando por siempre.
                  </p>
                </div>
              );
            case 'contexto':
              return <HistoriaContexto />;
            case 'whatsapp':
              return <WhatsAppChat />;
            case 'visuales':
              return <ElementosVisuales />;
            case 'protagonistas':
              return <Protagonistas />;
            case 'datoscuriosos':
              return <DatosCuriosos />;
            case 'sopa':
              return <SopaDeLetras />;
            case 'crucigrama':
              return <CrucigramaAcrostico />;
            case 'rosco':
              return <RoscoDePreguntas />;
            case 'ahorcados':
              return <Ahorcados />;
            default:
              return <HistoriaContexto />; // Default to context if unknown
          }
        })()}
      </main>
      <footer className="bg-gray-800 text-white p-6 mt-12 rounded-t-xl text-center shadow-inner">
        <p className="text-lg mb-2">¬°Aguante la Patria, che! Hecha con pasi√≥n por la historia y la tecnolog√≠a.</p>
        <p className="text-sm text-gray-400">
          Desarrollado para la Escuela Secundaria de Buenos Aires con mucho cari√±o y data hist√≥rica.
        </p>
      </footer>
    </div>
  );
};

export default App;
